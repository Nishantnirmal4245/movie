<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Movie Recommender</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="min-h-screen bg-gradient-to-br from-indigo-100 via-sky-100 to-teal-100 text-slate-900">
  <div class="max-w-3xl mx-auto px-4 py-10">
    <h1 class="text-3xl font-extrabold mb-6">ðŸŽ¬ Movie Recommender</h1>
    <div class="flex gap-2 mb-6">
      <input id="movie" placeholder="Enter a movie title..." class="w-full px-4 py-2 rounded-xl border shadow" />
      <button onclick="recommend()" class="px-5 py-2 rounded-xl bg-indigo-600 text-white font-semibold shadow">Go</button>
    </div>
    <div id="error" class="hidden p-3 mb-4 rounded bg-red-200 text-red-700"></div>
    <div id="results" class="grid gap-4"></div>
  </div>
<script>
const API_BASE = window.location.origin; // same domain as backend

async function recommend() {
  const title = document.getElementById('movie').value.trim();
  if (!title) return;
  document.getElementById('results').innerHTML = '';
  document.getElementById('error').classList.add('hidden');
  try {
    const r = await fetch(`${API_BASE}/recommend?title=${encodeURIComponent(title)}&k=6`);
    if (!r.ok) throw new Error(await r.text());
    const data = await r.json();
    const out = data.recommendations.map(rec => `
      <div class='p-4 rounded-xl bg-white shadow'>
        <div class='text-lg font-semibold'>${rec.title}</div>
        <div class='text-sm text-slate-500'>Similarity: ${rec.score.toFixed(3)}</div>
      </div>`).join('');
    document.getElementById('results').innerHTML = out;
  } catch (e) {
    document.getElementById('error').textContent = e.message;
    document.getElementById('error').classList.remove('hidden');
  }
}
</script>
</body>
</html>
